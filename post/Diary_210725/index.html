<html>
<head>
    <meta charset="utf-8"/>
<meta name="description" content=""/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>

<title>2021#9：7月25日 | dyron503的博客</title>

<link rel="shortcut icon" href="https://dyron503.github.io/favicon.ico?v=1627351734644">

<link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://dyron503.github.io/styles/main.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/css/bootstrap.min.css">

<script src="https://cdn.jsdelivr.net/npm/@highlightjs/cdn-assets/highlight.min.js"></script>
<script src="https://cdn.bootcss.com/highlight.js/9.15.10/languages/dockerfile.min.js"></script>
<script src="https://cdn.bootcss.com/highlight.js/9.15.10/languages/dart.min.js"></script>

<script src="https://cdn.jsdelivr.net/npm/moment@2.27.0/moment.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/js/bootstrap.min.js"></script>
<!-- DEMO JS -->
<!--<script src="media/scripts/index.js"></script>-->



    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.css">
</head>
<body>
<div class="main gt-bg-theme-color-first">
    <nav class="navbar navbar-expand-lg">
    <div class="navbar-brand">
        <img class="user-avatar" src="/images/avatar.png" alt="头像">
        <div class="site-name gt-c-content-color-first">
            dyron503的博客
        </div>
    </div>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <i class="fas fa-bars gt-c-content-color-first" style="font-size: 18px"></i>
    </button>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <div class="navbar-nav mr-auto" style="text-align: center">
            
                <div class="nav-item">
                    
                        <a href="/" class="menu gt-a-link">
                            首页
                        </a>
                    
                </div>
            
                <div class="nav-item">
                    
                        <a href="/archives" class="menu gt-a-link" target="_blank">
                            归档
                        </a>
                    
                </div>
            
                <div class="nav-item">
                    
                        <a href="/tags" class="menu gt-a-link">
                            标签
                        </a>
                    
                </div>
            
                <div class="nav-item">
                    
                        <a href="/friends" class="menu gt-a-link">
                            友人
                        </a>
                    
                </div>
            
                <div class="nav-item">
                    
                        <a href="/post/about" class="menu gt-a-link">
                            关于
                        </a>
                    
                </div>
            
        </div>
        <div style="text-align: center">
            <form id="gridea-search-form" style="position: relative" data-update="1627351734644" action="/search/index.html">
                <input class="search-input" autocomplete="off" spellcheck="false" name="q" placeholder="搜索文章" />
                <i class="fas fa-search gt-c-content-color-first" style="position: absolute; top: 9px; left: 10px;"></i>
            </form>
        </div>
    </div>
</nav>

    <div class="post-container">
        <div class="post-detail gt-bg-theme-color-second">
            <article class="gt-post-content">
                <h2 class="post-title">
                    2021#9：7月25日
                </h2>
                <div class="post-info">
                    <time class="post-time gt-c-content-color-first">
                        · 2021-07-25 ·
                    </time>
                    
                        <a href="https://dyron503.github.io/tag/zd4HxTUJF/" class="post-tags">
                            # 日志
                        </a>
                    
                        <a href="https://dyron503.github.io/tag/pzTFv7LNQz/" class="post-tags">
                            # 写作
                        </a>
                    
                </div>
                <div class="post-content">
                    <p>记录难得的躺平时光。</p>
<!-- more -->
<h3 id="汗水仿佛将要撕裂身体一般">“汗水仿佛将要撕裂身体一般”</h3>
<p>闲下来以后在补排球4季，这句话正是从OP中直接引来的。然而，我第一次切身体会到这种感觉并不是在体力透支时（大可能是此时已经没有用来文艺的神经了），而是站在没有任何排风设施的烧烤架旁。</p>
<p>顶着日晒和酷暑，克服了重重困难，X君、D君和我三家还是聚在了一起开烧烤聚会。这次聚会的开始远远不能称作顺利：本来应该是4家的聚会，因为W君（上学的时候和X君合住）头天晚上骑共享单车出了小小事故，他便非常遗憾的无缘与此了；我约好了去D君家门口搭他的车，结果上了车之后一路开向对方父亲的工作单位<s>原来是要加班</s>。颇为戏剧性的是我们约定的会面地点居然在约定时间前五分钟从四面八方围过来一大帮老太太等着上旅游大巴！而发出邀约的X君本应主场作战精力充沛，结果头天晚上爷爷偶然微恙，好消息是并无大碍，只是检查花了大半个晚上，全程陪同的他便两眼一合直到约定时间。</p>
<p>于是乎，当X君最后一个走进预订小院一角的台球室时，正好撞见比赛结束那一刻；由于我和D君你来我往很久没能进一个球，酷热难耐之下索性规定进第一个球的获胜，在那之后我便打进了第一球，唯一的小小遗憾是白球在这一击中没能碰上其它颜色的。不管了，去有空调的主屋里罢！</p>
<p>屋角有个破旧的点唱机，连着墙上的小米电视4C。然而曲库十分之不全，一大堆歌都只有原声而无伴奏。尝试向上面安装软件，好家伙，直接卡死！于是乎只好转向用D君的手机向上投屏，跳出两台“客厅的小米电视”——随便点选，终归是投上了。一开口就炸麦又是怎么回事？环顾四周，发现各个角落都放上了音响，简直就是不想让人正常使用麦克风。也是因为一向视KTV为主场的W君不在场，我们剩下几个只是点了几首歌就转手投屏看起了《动物新世代》。不带脑子的扳机社式的废燃，表现属实不错。看看电脑屏幕上《杀手Ⅱ》的下载进度；没想到深处农村，无线网络竟也能跑到20多M每秒。</p>
<p>接下来就是开头那一幕了；大块的羊排在烤架上冒出颇有灵性的烟气。你站在左边它便往左飘，站在右边它便向右去，气的我们索性围着烤炉站成一圈！即便用上扇子，也很难让它充分扩散。用刀连皮带肉切下一块，沾上孜然入口，香味四溢，实是美哉。我突发奇想，烤鸭皮配得白糖，这羊皮有何配不得？实际结果告诉我果然不配，所幸旁边水槽里有冰西瓜；再配上羊肉串、鸡翅、豇豆、鱼丸、脆骨、馍片、新鲜的番茄以及黄瓜，这一顿烧烤吃的那是一个有滋有味。大人们就着烧烤开始一边喝酒一边聊天，我们回屋去用投屏看视频，先是欣赏了心理医生精彩表演用马丁路德金引领宗教改革使观众正视情感烦恼，再观看一众 Vtuber 花式整活，直到隔院姐姐推门进来：我也看不懂，就是觉得怪可爱，却又不知道从何而来的。低头一看，两台手机播放一个视频，而投屏对象……社死现场啊啊啊啊啊啊啊！！！！！！！</p>
<p>是啊，这个人生中最长的暑假已然过半，而之前抬头不见低头见的我们也将奔赴从五道口到西沣路乃至更远的天涯四方。那么，就一次次的迈上未知的台阶，坚定而执着地前行吧。</p>
<h3 id="录取的前与后">录取的前与后</h3>
<p>要说煎熬，填报志愿绝对算上一条。人在未知面前总是会做出置身事外时感觉毫无必要的举动——比如我花了数天时间去研究比自己分数低了100多分的学校。与此同时，我也不断受到那些有志于坐冷板凳的参加强基的同学的消息。</p>
<p>譬如有的让学生预测 NBA 的总冠军；有的让人分析游戏中道具在现实中所用的材料；最正常的反倒是解释蜡烛耦合现象……幸运的是以上三位最后都收获了理想的结果。</p>
<p>我很幸运自己没有遇到“不能浪费分数”这样的阻力，还是去到了一个理想的专业。虽然学校比起那些顶尖大神是差出去了，但我不在乎。毕竟，强基计划意味着学物理，还不能转专业，何苦为了学校名头为难自己啊。</p>
<p>也有发挥不良的朋友去学数学一心为了考研，希望他一切顺利。</p>
<h3 id="探索面向对象的写作">探索面向对象的写作</h3>
<p>在编制游戏分支的时候，思维导图是非常符合直觉的方式。设置分支然后加上勾连，看起来似乎很美好。然而当剧情体量上升后，树状结构组织起来的剧情难免遇到两个困难：</p>
<p>其一是判定条件混乱。人物的状态有很多，而对话的潜台词又与之高度绑定。这些状态中，一部分是之前做出的选择，更多的是某些不可见的数值。因而，当分支条数不断上升的时候，很容易遇到部分条目在客观条件上“越过”角色所处境地，导致剧情无法继续推进的情况，比如选项A导致角色B心情低落，一段时间后的选项B又高度依赖玩家与B的羁绊；同时，这样的开发手段对团队协作高度不友好，很难让参与开发的所有人员都对故事的每个细节清清楚楚，时刻想起。割裂感也是不可避免的了。</p>
<p>其二是维护困难。故事很难在最初版本达到完善，基本上都需要反反复复进行重置。然而，在已有的树中增删分支却很容易导致整个逻辑体系彻底崩盘，甚至让一大部分工作直接化为泡影。同时，需要考虑的选项组合在后期会指数级上升，想要兼顾是几乎不可能的事情，而强行收束就意味着要砍去已有分支，由是走入了刚才那条死胡同。</p>
<p>在深入的查阅了资料之后，我意识到非连通图很可能是处理此类需求的有效方式。具体实践如下：</p>
<p>首先，定义正在写作的某个<strong>游戏事件</strong>为 EVENT_0 ，同时定义世界事件 EVENT_W 、玩家事件 EVENT_P 、角色事件 EVENT_C1 、 EVENT_C2 ……当然可以继续增加，不过作为例子还是简化些好；</p>
<p>所有的事件都必须满足以下几个条件：</p>
<ul>
<li>事件由多个单向节点组成</li>
<li>后级节点的发生建立在前级节点的基础上，换句话说，若后一节点发生，之前所有节点必定发生</li>
</ul>
<p>对于某些事件还有单独的规制：</p>
<ul>
<li>玩家不可能在单次流程内推进完所有<strong>角色事件</strong></li>
<li><strong>世界事件</strong>的推进不受玩家控制</li>
<li><strong>玩家事件</strong>可有可无，但玩家事件一旦确实，需要给予控制角色事件进度的能力</li>
</ul>
<p>世界事件的变动视为时间的变动。当需要设计世界的回应时，读取每个事件的进度，即可恰当的设计相应回应内容。</p>
<p>输出内容：一个有序数组，表示几个节点的位置；以及相关的剧情设计</p>
<p>样例如下：</p>
<p>C1：情侣A C2：情侣B 玩家：饭店的小伙计，与A、B关系很近</p>
<p>EVENT_W：商场发生袭击事件——引发混乱——商场被封闭</p>
<p>EVENT_P：了解A的喜好——准备材料——给出惊喜</p>
<p>EVENT_C1：去领工资——去商场买礼物——按约定时间去吃饭</p>
<p>EVENT_C2：接到玩家电话——提前到达——点菜</p>
<p>输出内容：</p>
<p>(Ｗ,Ｐ,C1,C2) = (2,1,2,2)：玩家在与B的谈话过程中得知A的爱好，于是决定提前动手；A那边遭受了困难，耽误了好一番时间后才到达，并讲述袭击现场的故事；</p>
<p>(Ｗ,Ｐ,C1,C2) = (3,2,3,1)：在新闻里得知袭击事件的玩家非常担心，在菜未备好的时候看见A和B一起入场，悬着的心才安分下来；</p>
<p>(Ｗ,Ｐ,C1,C2) = (1,1,3,0)：忘了通知对方的玩家连忙向A道歉，B在途中碰到了袭击事件</p>
<p>这一策略的优点是显而易见的：首先无论从玩家角度世界做出了多少回应，生成回应的过程只是以最靠近的几个平行事件进度作为依据，高度可控且工程友好；同时，不需要遍历所有的事件节点组合（如Ｗ1与W3），因为后一节点发生就意味着前面所有节点已经发生，不会出现违反逻辑的情况；在此之上，不同事件的进程并未实质性受到影响，因此情节的节奏依然可控，还能大大降低冗余文本量（因为并没有分支产生）；最后，即使中间出于某种需要增加或减少了节点数量，只要调整后的事件依然符合以上条件，已经写完的回应内容（只要不涉及被删除节点）都不会受到影响，整套系统具备很强的鲁棒性。</p>
<p>但在设计工具里面实现这一做法还面临着一系列挑战；因为大部分工具的判定依然是树状的，跟踪时间进度只能为每个事件设计全局变量，但这样一来触发条件（采样点）的设置就显得模糊起来了；同时，在引擎里面落地这一过程依然充满挑战。我仍然在探索更加完备的解决方案。</p>

                </div>
            </article>
        </div>

        
            <div class="next-post">
                <div class="next gt-c-content-color-first">下一篇</div>
                <a href="https://dyron503.github.io/post/Genshin_01/" class="post-title gt-a-link">
                    免费给《原神》带来了什么？
                </a>
            </div>
        

        

        

        
            <script src='https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js'></script>

<style>
	div#vcomments{
		width:100%;
		max-width: 1000px;
		padding: 2.5%
	}
</style>


	<div id="vcomments"></div>

<script>
	new Valine({
		el: '#vcomments',
		appId: 'YsbjRDrdX6AjxIK8xsn5xAk8-MdYXbMMI',
		appKey: 'EGM3ygEzmTaU2U0EgIkG5ben',
		avatar: 'wavatar',
		pageSize: 5,
		recordIp: false,
		placeholder: '随便写写吧',
		visitor: false,
	});
</script>

        

        <div class="site-footer gt-c-content-color-first">
    <div class="slogan gt-c-content-color-first">跨越重重难关，方能齐聚一堂</div>
    <div class="social-container">
        
            
        
            
        
            
        
            
        
            
        
            
        
    </div>
    <div class="footer-info">
        
    </div>
    <div>
        Theme by <a href="https://imhanjie.com/" target="_blank">imhanjie</a>, Powered by <a
                href="https://github.com/getgridea/gridea" target="_blank">Gridea | <a href="https://dyron503.github.io/atom.xml" target="_blank">RSS</a></a>
    </div>
</div>

<script>
  hljs.initHighlightingOnLoad()
</script>

    </div>
</div>
</body>
</html>
